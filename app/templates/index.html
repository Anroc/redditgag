{% load static %}
<html>
  <head>
    <title>redditgag - go and have fuck</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/redditgag.css' %}" />
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed"
          data-toggle="collapse" data-target"#bs-navbar-collapse"
          aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </div>
        <div class="collapse navbar-collapse" id="bs-navbar-collapse">
          <ul class="nav navbar-nav">
            <li>
              <a href="{% url 'about' %}">about</a>
            </li>
          </ul>
          <!-- TODO: create form to input subreddit name (see
            https://getbootstrap.com/components/#navbar -->
        </div>
      </div>
    </nav>
    <div class="post-container">
    {% for post in posts %}
      <div class="post well">
        <h3 class="title">
          {{ post.title }}
          <small>
            submitted by /u/{{ post.author }}
            {% if print_subreddit %} to /r/{{ post.subreddit }}
            {% endif %}
          </small>
        </h3>
        <div class="post-content">
          {% if post.kind == "IMAGE" %}
          <img src="{{ post.url }}" class="post-image" />
          {% elif post.kind == "VIDEO" %}
          <video>
            {% for source in post.sources %}
            <source type="{{ source.mime }}" src="{{ source.url }}" />
            {% endfor %}
          </video>
          {% elif post.kind == "IFRAME" %}
          <div class="aspect-ratio">
            <iframe src="{{ post.url }}" frameborder="0" allowfullscreen>
            </iframe>
          </div>
          {% elif post.kind == "TEXT" %}
          <div class="selftext">
            {{ post.selftext | safe }}
          </div>
          {% elif post.kind == "SORRY" %}
          <div class="sorry row">
            <div class="sorry-image col-sm-12 col-md-3">
              <img src="{% static 'img/sorry.svg' %}" />
            </div>
            <div class="sorry-text col-sm-12 col-md-9">
              <h6>Sorry</h6>
              <p>
                I wasn't able to find an embeddable version of
                <a href="{{ post.url }}">{{ post.url }}</a>. Maybe someone will
                send the developer a pull request to fix this ;)
              </p>
            </div>
          </div>
          {% endif %}
        </div>
        <div class="things">
          <a href="{{ post.permalink }}">comments</a>
        </div>
      </div>
    {% endfor %}
    </div>
  </body>
</html>
